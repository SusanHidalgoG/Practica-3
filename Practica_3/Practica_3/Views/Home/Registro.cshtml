@{
    ViewBag.Title = "Registro de Abonos";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<header class="py-5 bg-light border-bottom mb-4">
    <div class="container">
        <div class="text-center my-5">
            <h1 class="fw-bolder">Registro de Abonos </h1>
            <p class="lead mb-0"> Aquí puedes registrar pagos parciales de forma sencilla y eficiente.</p>
        </div>
    </div>
</header>

<div class="container mt-5 mb-5">
    <div class="py-5 bg-light border-bottom mb-4">
        <div class="container">
            <form id="formAbono" method="post" action="@Url.Action("RegistrarAbono", "Home")">
                <div class="row justify-content-center">
                    <div class="col-md-8">

                        <!-- Fila Compra y Consultar -->
                        <div class="row align-items-center mb-3">
                            <label for="CompraId" class="col-sm-2 col-form-label fw-bold">Compra</label>
                            <div class="col-sm-7">
                                <select id="CompraId" name="CompraId" class="form-select" required>
                                    <option value="">Seleccione una compra pendiente</option>
                                    <!-- Aquí se llenará con las compras pendientes desde el controlador -->

                                </select>
                            </div>
                            <div class="col-sm-3">
                                <button type="button" id="btnConsultar" class="btn btn-secondary w-100">Consultar</button>
                            </div>
                        </div>

                        <!-- Lista de productos -->
                        <div class="mb-3" id="productosContainer" style="display: none;">
                            <label class="form-label fw-bold">Productos</label>
                            <ul class="list-group" id="listaProductos">
                                <!-- Aquí se agregarán productos -->
                            </ul>
                        </div>

                        <!-- Saldo anterior -->
                        <div class="mb-3">
                            <label for="SaldoAnterior" class="form-label fw-bold">Saldo Anterior</label>
                            <input type="text" id="SaldoAnterior" name="SaldoAnterior" class="form-control" readonly />
                        </div>

                        <!-- Monto a abonar -->
                        <div class="mb-3">
                            <label for="MontoAbono" class="form-label fw-bold">Abono</label>
                            <input type="number" id="MontoAbono" name="MontoAbono" class="form-control" step="0.01" required />
                            <div class="invalid-feedback" id="errorAbono" style="display: none;">El abono no puede ser mayor al saldo anterior.</div>
                        </div>

                        <!-- Botón Abonar -->
                        <div class="d-grid">
                            <button type="submit" class="btn btn-info btn-lg">Abonar</button>
                        </div>

                    </div>
                </div>
            </form>
        </div>
    </div>
</div>